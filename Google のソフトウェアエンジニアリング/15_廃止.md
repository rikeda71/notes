# 15章 廃止

```markdown
要約: 旧システム（製品ではなく技術的システム）から脱する系統的な移行、最終的な撤去からなるプロセスである「廃止」について、Googleが学んだ教訓について説明

- ソフトウェアシステムの保守コストと撤去するコストを比較することが廃止対象か決める手がかりになる
- 廃止の難しさ。技術的な観点のほかに利用者・開発者のメンタリティ的な部分も
- 設計に廃止しやすさを含めることの検討。何かを廃止することは何かを構築することよりも難しい
```

## なぜ廃止するのか

前提：**コードは責務であり資産でない。コードが提供する機能は価値をもたらし価値は資産となる**

- コードにはコストがあり、コストはシステムの存命期間全体にわたってシステムが保守される間に負担される
- 何もかも古いからといって廃止するのではなく、旧式であることが実証でき、匹敵する機能を提供する置き換え先システムが存在するものが、廃止が妥当なもの
    - 例えば、リソースをより効率的に使ったり、より優れたセキュリティ属性を持っていたり、より持続可能な流儀で組み込めたり、バグが直ったりする
- 同じ機能を実行するシステムが複数あると、新しい方のシステムの発展にかける工数が少なくなってしまう。一方で、旧に古いシステムを廃止しようとすると利用者から反感はあるので、廃止プロジェクトは念入りに進むべき

## 廃止の難しさ

- 旧システムが想定外の挙動をしていた場合、新システム上でも再現するようにしないといけない
- 新システムが旧システムと比べ、利用者から見て優れた状態でなければならない
- 数年開発してきたというコードに対する感情的な愛着
    - ソースコードリポジトリが履歴から検索可能であることを保証することで対処
- 廃止に関する取り組みに予算をつけて実行することが政治的に難しい
- 一度に移行・廃止するコストは高いため、インクリメンタルに廃止することも必要

### 設計中の廃止

設計段階から最終的にシステムを廃止できるように設計するという発想

- 例えば、原子力発電所はサービスの稼働期間後に結果として起こり得る閉鎖を制約として想定された設計になっている
- Google を含む多くの会社の企業文化として、新製品を迅速に開発し、出荷することを強調しているため、ソフトウェアエンジニアもこれらの文化に惹かれる
    - 結果的にこれが設計段階から廃止を考慮することに逆のインセンティブをもたらしている

■ 廃止を設計に組み込むための検討事項

- 自分の製品の消費者が自分の製品から置き換え先になりうるものへ移行する際の容易さ
- 自分のシステムを部分的にインクリメンタルに置き換えられる方法について
- プロジェクトを長期間サポートするかどうか

## 廃止の類型

廃止は単一種類のプロセスではなく、「いつの日かこれを停止したいと思っている」から「このシ ステムは明日消え去る」までのプロセス群の連続体

その種類について紹介　

### 勧告的廃止

**締め切りがなく、組織にとっての優先度が高くない廃止**

- 新システムの存在を宣伝し、アーリーアダプター的ユーザーに新システムの試用 を開始するよう促すには良いツールとなる。ただし、以下の制約を持つ
    - 本番環境での利用と負荷に耐える準備ができているべき
    - 新しいユーザーを無期限にサポートする用意ができているべき
- 勧告的廃止が強力な利点を持つシナリオは、新システムがそのユーザーに抗しがたい利点を提示している場合
- 勧告的廃止によりシステムの作者は、作者が望む方向へ向かうようユーザーに促せるが、ユー ザーが移行作業の大部分を実行するのを当てにするべきではない

### 強制的廃止

**旧システムの廃止に締め切りを伴う**

- 強制的廃止が実際に機能するには、スケジュールが強制メカニズムを備えていなければならない
    - 廃止スケジュールを変更できないことを含意するわけではなく、廃止プロセスを実行するチームに、ユーザーを移行させる取り組みの間ずっとユーザーに警告を十分に行った上でなら、それに従わないユーザーの利用を止められる権限を与えることを含意する
- Google では、システム稼働終了の何週間・何ヶ月前に、長めのシステム計画停止期間を発表することで、強制的廃止を少しでも円滑に進めようとしている

## 廃止プロセスの管理

プロダクト開発とプロジェクト管理の差分について記載する

### プロセスのオーナー

- プロダクト開発と同様にオーナーをつける
    - リソースの無駄遣いのように思うかもしれないが、さもなければ、自然に廃止プロセスが完了することは必ずない
- 緊急でない場合、20% ルールを使うタイミングでもある

### マイルストーン

- 廃止プロジェクトのマイルストーンを「完全な撤去」だけを計測可能なマイルストーンとするのは避けるべきである
